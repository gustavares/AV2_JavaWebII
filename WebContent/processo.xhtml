<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Lista de Processos</title>
</h:head>
<h:body>
	<div>
		<h1>Processos</h1>
		<div>
			<p:commandLink action="#{processoBean.editarProcesso(null)}" value="Cadastrar Processo"></p:commandLink>
		</div>
		<div>
		<h:form>
			<p:growl id="message" showDetail="true" />
		
			<p:dataTable var="processo" value="#{processoBean.processos}" emptyMessage="Não existem processos cadastrados." tableStyle="width:100%">		
				  <p:columnGroup type="header">
					
					<p:column headerText="Número Do Processo"></p:column>
					<p:column headerText="Razão Social / CNPJ"></p:column>
					<p:column headerText="Fiscal Resposável"></p:column>
					<p:column headerText="Data do Relato"></p:column>
					<p:column colspan="2" width="10%" headerText="Ações"></p:column>
				</p:columnGroup>
			
				<p:column>
		            <f:facet name="header">
                		<h:outputText value="Razão Social / CNPJ" />
            		</f:facet>
					<h:outputText value="#{processo.fornecedor.razaoSocial}" /> / <h:outputText value="#{processo.fornecedor.cnpj}" />
				</p:column>
				<p:column>
		            <f:facet name="header">
                		<h:outputText value="Fiscal Resposável" />
            		</f:facet>
					<h:outputText value="#{processo.fiscalResponsavel}" />
				</p:column>
				<p:column>
		            <f:facet name="header">
                		<h:outputText value="Data do Relato" />
            		</f:facet>
					<h:outputText value="#{processo.dataRelatorio}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>			
				<p:column  exportable="false">
					<p:commandButton action="#{processoBean.editarProcesso(true, processo)}">
					</p:commandButton>
				</p:column>
	    	</p:dataTable>
	    	
	    	<p:dataTable rendered="false" id="tbl" var="processo" value="#{processoBean.processos}" emptyMessage="Não há processos cadastrados">
				<p:column>
		            <f:facet name="header">
                		<h:outputText value="CNPJ" />
            		</f:facet>
					 <h:outputText value="#{processo.fornecedor.cnpj}" />
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Razão Social"/>
					</f:facet>
					<h:outputText value="#{processo.fornecedor.razaoSocial}" />
				</p:column>
				<p:column>
		            <f:facet name="header">
                		<h:outputText value="Data do Relato" />
            		</f:facet>
					<h:outputText value="#{processo.dataRelatorio}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>
				<p:column>
		            <f:facet name="header">
                		<h:outputText value="Relado do Ocorrido" />
            		</f:facet>
					<h:outputText value="#{processo.relatoFiscalizacao}" />
				</p:column>		
				<p:column>
		            <f:facet name="header">
                		<h:outputText value="Fiscal Resposável" />
            		</f:facet>
					<h:outputText value="#{processo.fiscalResponsavel}" />
				</p:column>

	    	</p:dataTable>
			</h:form>
		</div>
		<div>
			<a href="../index.xhtml">Voltar</a>
		</div>
	</div>
</h:body>



</html>